# 项目计划书：基于Web的上海轨道交通最优路径规划系统

**项目名称:** “MetroNav-Shanghai” - 上海轨道交通最优路径与时间预测Web应用
**团队成员:** 热迪力、邓梓衡、孙义宸
**日期:** 2025年11月13日

---

### 1. 项目目标

本项目旨在开发一个高效、直观的Web应用程序，为用户提供上海市轨道交通的最优乘坐方案。系统的核心功能是，用户输入起始站点和终点站点后，能够快速计算并展示出一条或多条最优路径，这些路径将综合考虑换乘次数最少、乘坐站点最少等因素。此外，作为项目的扩展功能，我们将尝试引入基于历史数据的路程时间预测，为用户提供更精准的出行时间参考。

本项目将严格遵循Web开发的基本要求，采用前后端分离的架构，实现一个功能完善、设计合理的动态网站。

### 2. 预计完成内容

1.  **用户界面 (UI):**
    *   一个简洁明了的首页，包含项目介绍、数据库统计信息以及API使用教程。
    *   一个交互式的路径查询页面，用户可以通过下拉列表或自动补全的输入框选择起始点和终点站。
    *   一个清晰的结果展示页面，用文本和（或）图形化方式展示推荐的路线，包括：
        *   乘坐的线路。
        *   途经的站点。
        *   换乘站点及换乘线路。
        *   总站数和预计通行时间。
    *   （可选）一个静态或动态的上海地铁线路图，用于辅助展示。

2.  **后端服务 (API):**
    *   提供获取所有线路和站点信息的API接口。
    *   核心的最优路径计算接口，接收起终点，返回路径规划结果。
    *   （可选）提供时间预测的API接口。

3.  **数据库:**
    *   一个结构化、符合第三范式（3NF）的数据库，存储上海所有地铁线路、站点及其关系的数据。

### 3. 技术选型阐述

根据团队成员的技术背景和项目需求，我们选择了以下技术栈：

*   **后端框架: Flask (Python)**
    *   **阐述:** 团队成员热迪力和邓梓衡均掌握Python。Flask是一个轻量级的Web框架，非常适合快速开发和构建API。它的灵活性高，学习曲线平缓，足以支持本项目的全部后端需求。热迪力同学的深度学习知识可以在未来用于实现更复杂的时间预测模型。

*   **前端实现: Vue.js 框架**
    *   **阐述:** 虽然可以使用原生HTML/CSS/JS，但为了提高开发效率和代码的可维护性，我们选择Vue.js。它是一个渐进式框架，上手快，组件化开发模式非常适合构建单页面应用（SPA）。孙义宸同学作为前端负责人，使用Vue可以更高效地构建动态、响应式的用户界面。

*   **数据库: MySQL**
    *   **阐述:** **团队成员对MySQL有扎实的基础。** MySQL是全球最受欢迎的开源关系型数据库之一，以其稳定性、易用性和广泛的社区支持而闻名。它完全支持本项目所需的SQL查询和事务处理，能够保证数据的一致性和完整性。同时，设计符合第三范式的表结构在MySQL中同样可以轻松实现，非常适合作为本项目的数据库解决方案。

*   **核心算法: Dijkstra 或 A\* 算法**
    *   **阐述:** 这是一个典型的图论问题，地铁网络可以被建模为一个图，其中站点是节点，线路是边。Dijkstra算法是解决单源最短路径问题的经典算法，非常适合本地铁换乘场景。如果考虑时间预测，可以将边的权重设为预计时间，使用A\*算法（Dijkstra的改进版）可以获得更高的计算效率。

### 4. 数据库设计计划 (遵循第三范式)

为了消除数据冗余并保证数据一致性，我们将数据库设计如下 (此设计同样适用于MySQL):

**实体:**
1.  **线路 (Line):** 描述地铁线路的基本信息。
2.  **站点 (Station):** 描述每个地铁站的基本信息。
3.  **线路-站点关系 (LineStation):** 描述一条线路包含了哪些站点以及它们之间的顺序。
4.  **换乘关系 (Transfer):** 描述两个不同线路的站点之间可以换乘。

**表结构:**

1.  `lines` **(线路表)**
    *   `line_id` (INT, 主键, 自增): 线路唯一标识
    *   `line_name` (VARCHAR(255), 唯一): 线路名称 (如 "1号线")
    *   `line_color` (VARCHAR(7)): 线路代表色 (用于前端显示, e.g., '#FF0000')
    *   `first_opening` (DATE): 首次开通日期

2.  `stations` **(站点表)**
    *   `station_id` (INT, 主键, 自增): 站点唯一标识
    *   `station_name` (VARCHAR(255), 唯一): 站点名称 (如 "人民广场")
    *   `longitude` (DECIMAL(10, 7)): 经度 (可选，用于地图)
    *   `latitude` (DECIMAL(10, 7)): 纬度 (可选，用于地图)

3.  `line_stations` **(线路站点表 - 关联表)**
    *   `id` (INT, 主键, 自增): 关系ID
    *   `line_id` (INT, 外键, 关联 `lines.line_id`): 线路ID
    *   `station_id` (INT, 外键, 关联 `stations.station_id`): 站点ID
    *   `station_order` (INT): 该站点在此线路上的顺序（用于确定前后站）
    *   *主键: `(line_id, station_id)` 构成联合唯一键*

4.  `transfers` **(换乘表)**
    *   `transfer_id` (INT, 主键, 自增): 换乘关系ID
    *   `from_station_id` (INT, 外键, 关联 `stations.station_id`): 换乘起始站点
    *   `to_station_id` (INT, 外键, 关联 `stations.station_id`): 换乘目标站点
    *   `transfer_time` (INT): 预计换乘步行时间（秒）
    *   *此表用于定义同站换乘（from_station_id 和 to_station_id 相同但属于不同线路）或通道换乘（不同站点之间）。在算法中，换乘将被视为特殊的“边”。*

**设计说明:**
此设计符合第三范式（3NF）：
*   **第一范式:** 所有字段都是原子性的，不可再分。
*   **第二范式:** `line_stations` 表的非主键字段 `station_order` 完全依赖于其联合主键 `(line_id, station_id)`。
*   **第三范式:** 表中没有非主键字段传递依赖于主键。例如，`lines` 表中的 `line_name` 直接依赖于 `line_id`，没有中间依赖。站点名只存储在`stations`表中，避免了在`line_stations`中重复存储导致的数据冗余和更新异常。

### 5. 预计分工

根据团队成员的技能特点，我们进行如下分工：

*   **后端开发 (邓梓衡 & 热迪力):**
    *   **邓梓衡 :**
        *   负责Flask应用的基础架构搭建。
        *   负责**MySQL数据库**的搭建、数据录入和管理。
        *   实现获取线路、站点信息等基础API接口。
    *   **热迪力 :**
        *   协作完成核心算法的调试和优化。
        *   编写Dijkstra/A\*核心路径规划算法的Python实现。
        *   **负责时间预测模块的探索与实现**，可以利用其深度学习知识，尝试分析数据，构建一个简单的预测模型（例如，基于时间的线性回归模型）作为项目亮点。
        *   参与API接口的设计与开发。
*   **前端开发 (孙义宸):**
    *   负责所有前端页面的设计与实现（使用Vue.js）。
    *   负责调用后端API接口，并在前端动态展示数据。
    *   实现路径查询的交互逻辑和结果的可视化展示。
    *   完成首页（包括项目介绍、数据库统计信息、API教程）的开发。

### 6. 首页内容规划

根据要求，首页将包含以下模块：
1.  **数据库介绍:**
    *   简要说明我们采用的数据库技术（**MySQL**），并展示上述的数据库表结构设计图或说明，强调其如何满足第三范式。
2.  **基本统计信息:**
    *   通过后端API从数据库动态查询并展示一些有趣的统计数据，例如：
        *   当前收录的总线路数。
        *   当前收录的总站点数。
        *   拥有最多站点的线路。
        *   最繁忙的换乘站（拥有最多换乘线路的站点）。
3.  **API教程:**
    *   提供一个简单的API使用说明文档，介绍如何调用我们开发的路径规划API。
    *   **示例:**
        *   `GET /api/stations` - 获取所有站点列表。
        *   `GET /api/lines` - 获取所有线路列表。
        *   `POST /api/route` - 规划最优路径
            *   **请求体:** `{ "start_station_id": 101, "end_station_id": 205 }`
            *   **成功响应:** `{ "path": [...], "time": 35 }`

---
这份计划书全面地规划了项目的各个方面，分工明确，技术路线清晰，我们相信能够按时、高质量地完成本次课程项目。